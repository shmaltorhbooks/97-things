# Руководствуйтесь неопределенностью

## Кевлин Хенни

Столкнувшись с альтернативными вариантами, люди обычно полагают, что
самое важное - сделать правильный выбор. В проектировании
(программных продуктов или любом другом) это не так. Наличие альтернативы -
признак того, что необходимо проанализировать неопределенность в дизайне
системы. Используйте неопределенность как определяющий фактор для
выявления тех мест, где можно отложить переход к деталям или
применить разбиение и абстракцию, чтобы снизить важность проектировочных
решений. Если вы жестко «прошьете» в системе первое же решение,
которое пришло вам в голову, оно, скорее всего, в дальнейшем свяжет вам руки.
В результате случайные решения начнут играть важную роль, а гибкость
программного продукта снизится.

Одно из самых простых и конструктивных определений архитектуры дал
Гради Буч (Grady Booch): «Любая архитектура является результатом
проектирования, но не любое проектирование направлено на создание
архитектуры. Архитектура служит представлением важных проектировочных
решений, формирующих систему, причем важность здесь определяется
стоимостью изменений». Отсюда следует, что эффективной является та
архитектура, которая в общем случае снижает важность решений, принятых в ходе
проектирования. Неэффективная архитектура эту важность увеличивает.

Если проектировочное решение может повести по одному из двух путей,
архитектор должен отступить на шаг. Вместо того чтобы выбирать между
вариантами А и Б, он должен подумать над другим вопросом: «Как
спроектировать решение, чтобы снизить важность выбора между А и Б?». В этой
ситуации интересен не выбор между А и Б, а сам факт существования этого
выбора (а также то, что правильный выбор необязательно очевиден или
неизменен).

Иногда архитектору приходится ходить кругами, прежде чем его озарит и он
распознает возникшую дихотомию. Вы стоите у доски, обсуждая (весьма
энергично) разные варианты с коллегой? Вы задумчиво бормочете «М-м-м»
и «Э-э-э» над кодом, бесконечно перебирая возможные реализации? Когда
новое требование или уточнение существующего требования ставит под
сомнение разумность текущей реализации, перед вами неопределенность. Как
реагировать на нее? Подумайте, как с помощью разделения или
инкапсуляции изолировать принимаемое решение от кода, который в конечном итоге
зависит от этого решения. Альтернативой этому часто становится
невнятный код, который, словно нервничающий человек на собеседовании,
бормочет что-то невразумительное и пытается компенсировать неуверенность
множеством догадок и общих фраз. А если выбор делается с твердой, но
необоснованной уверенностью, то проект на полной скорости и без оглядки
сворачивает на неверный путь.

Часто возникает искушение принять «решение ради решения». В таких
ситуациях вам поможет опционное мышление*. Если существует
неопределенность относительно различных путей, по которым может пойти разработка
системы, примите решение не принимать решение. Отложите конкретное
решение до того момента, когда его можно будет принять более ответственно
на основании реальных знаний, но не слишком надолго, чтобы не попасть в
ситуацию, когда эти знания уже бесполезны.

Архитектура и процесс разработки тесно переплетены; это главная причина,
по которой архитектор должен отдавать предпочтение таким циклам
разработки и архитектурным подходам, которые имеют эмпирическую природу
и обеспечивают обратную связь, чтобы конструктивно использовать
неопределенность для деления на части самой системы и графика ее разработки.

> [!NOTE]
> Опционное мышление (options thinking) - подход к оценке эффективности
проектов с точки зрения концепции реальных опционов (см. http://ru.wikipedia.org/wiki/Реальный_опцион), представляющий собой поиск дополнительных
возможностей, не учитываемых при традиционном анализе. Опционное
мышление применимо к широкому спектру проектов: слияния и поглощения,
банковское кредитование, инновационные проекты и т. п.