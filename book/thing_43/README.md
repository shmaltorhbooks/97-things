# Правила диктует контекст

## Эдвард Гарсон

Мне видится здесь некоторая ирония: разговор об идеалах архитектуры я
начинаю с заявления о том, что идеалов, по сути дела, не существует. Ну, а если
их нет, то и писать, видимо, больше не о чем... Налицо явное противоречие,
и попытки продолжать в том же духе могут, чего доброго, привести к гибели
Вселенной или чему-нибудь еще в этом роде - как знать?

Но увы, ceci n'est pas une pipe[^1].

Один из наиболее ценных уроков, которые я вынес из опыта работы
архитектором ПО, таков: контекст решает, а простота помогает. В практическом
смысле это означает, что контекст - единственная сила, превосходящая
простоту при принятии архитектурных решений.

Говоря о контексте, я имею в виду не только непосредственные
высокоуровневые показатели вроде ключевых бизнес-факторов, но и оказывающие
косвенное влияние элементы (например, новые технологии и
интеллектуальное лидерство в том или ином вопросе). Хороший архитектор умеет
отслеживать несколько быстро движущихся целей.

Из чего состоит хорошая архитектура? Она является продуктом решений,
которые принимаются в контексте противоречивых задач с различными
приоритетами. Это означает, что самые важные решения иногда связаны не
с тем, что следует включить в систему, а с тем, что из нее следует исключить.
Ценность хорошей архитектуры заключается в умелом принятии решений
(а ее продукт всего лишь отражает ваши намерения).

История предлагает нам немало интересных примеров влияния контекста
на архитектуру. Мой любимый пример - выбор базы данных для
программного обеспечения современного танка[^2]. (Обычно выбор базы данных не
имеет существенного значения для архитектуры системы; этот пример
приводится лишь для пояснения.)

Когда пришло время выбирать базу данных, команда занялась изучением
различных вариантов. Большинство баз данных оказалось способным
обеспечить уровень производительности, необходимый для систем навигации
и наведения на цель при быстром движении танка по пересеченной
местности. Но потом команда неожиданно выяснила, что выстрел из орудия
создает сильный электромагнитный импульс, который вызывает сбой бортовых
систем - и, конечно, базы данных! На современном поле боя танк с
неработающим программным обеспечением буквально теряет связь с внешним
миром. В этом контексте решающим фактором при выборе базы данных
стало время восстановления, и лучшими показателями в этом отношении
обладала на тот момент InterBase, поэтому для танка Ml Abrams была в итоге
выбрана именно эта база данных[^3].

Итак, хотя технологические дебаты «X против Y» бушуют на многих
форумах, все это пустая забава. Их основой часто служат отнюдь не
принципиальные расхождения в техническом исполнении, а более тонкие отличия,
которым пользователи отдают предпочтение при отсутствии «козырной
карты» в виде определяющего контекста.

Ваша команда должна освободиться от стремления к идеалу. Начните с
анализа контекста и используйте его как отправную точку для поиска самых
простых решений.

[^1]: «Это не трубка» (фр.). Подпись под курительной трубкой на картине сюрреалиста
Рене Магритта «Вероломство образов».

[^2]: Несмотря на свое в высшей степени сомнительное предназначение, танк остается
чудом технической мысли.

[^3]: Интересно отметить, что вследствие особенностей архитектуры InterBase база
данных в процессе записи на диск всегда находится в согласованном состоянии.
Это один из факторов, которые обусловливают столь быстрое восстановление
базы при сбоях оборудования.