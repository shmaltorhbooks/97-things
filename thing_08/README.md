# Сбои неизбежны

## Майкл Найгард

Оборудование подвержено сбоям, поэтому мы вводим в наши системы
избыточность. Она позволяет пережить отдельные сбои оборудования, но
повышает вероятность того, что в любой момент времени в системе будет
присутствовать хотя бы одна неисправность.

Программный код тоже подвержен сбоям. Наши приложения строятся на
основе программного кода, а значит, они тоже уязвимы. Мы реализуем
средства мониторинга, сообщающие о сбоях приложения, однако в основе этих
средств тоже лежит программный код, а значит, они сами подвержены сбоям.

Люди тоже совершают ошибки, поэтому мы стараемся автоматизировать
наши действия, диагностику и рабочие процессы. Автоматизация снижает
вероятность ошибок, обусловленных нарушениями правил, но повышает
вероятность ошибок, возникающих из-за отсутствия правил. Ни одна
автоматизированная система не способна реагировать на такой спектр ситуаций,
как человек.

Поэтому мы добавляем к средствам автоматизации механизмы
мониторинга. Новое программное обеспечение, новые возможности для ошибок.

Сети строятся из оборудования, программного обеспечения и очень
длинных линий связи. А значит, и сети подвержены сбоям. Даже если сеть
работает нормально, ее поведение формально не прогнозируемо, потому что
пространство состояний большой сети с практической точки зрения бесконечно.
Отдельные компоненты могут обладать детерминированным поведением, но
поведение их совокупности по сути своей хаотично.

Любой механизм безопасности, который мы применяем для устранения
некоторой разновидности ошибок, вводит новые виды сбоев. Мы организуем
кластеризацию, чтобы приложение автоматически переходило со сбойного
сервера на рабочий, но теперь при капризах кластерной сети возникает риск
«расщепления мощностей»*.

Стоит напомнить, что авария на Тримайл-Айленд2 произошла в основном из-
за клапана сброса давления - механизма безопасности, который должен был
предотвращать некоторые виды сбоев, связанных с избыточным давлением.

Стало быть, сбои в системах в любом случае неизбежны. Так что же нам
делать?

Осознайте один факт: независимо ни от чего в вашей системе будут
происходить различные сбои. Отрицая их неизбежность, вы утрачиваете
возможность контроля и изоляции этих сбоев. Но, приняв этот факт, вы сможете
спроектировать реакцию своей системы на конкретные сбои. По аналогии
с тем, как конструкторы автомобилей создают зоны деформации (области,
деформирующиеся в первую очередь и гасящие энергию столкновения для
пассивной защиты пассажиров), вы можете спроектировать защитные
режимы сбоев, которые будут изолировать повреждения и защищать
остальные компоненты системы.

Если этого не сделать, вам придется иметь дело со всеми
непредсказуемыми - и обычно опасными - сбоями, возникающими в ходе работы системы.

> [!NOTE]
> Ситуация, при которой каждая сторона убеждена в полной неработоспособности другой стороны и продолжает захватывать ресурсы так, как если бы другой стороне никакие ресурсы не принадлежали.

> [!NOTE]
> Крупнейшая авария в ядерной энергетике США, сопровождавшаяся частичным расплавлением активной зоны реактора.

> Майкл Найгард (Michael Nygard) написал книгу «Release It! Design and Deploy Product ion-Ready Software» (Выпускаем в свет! Разработка и внедрение ПО, готового к выпуску) (Pragmatic Bookshelf), получившую премию Jolt Productivity в 2008 году. Другие его публикации можно найти по адресу http://www. michaelnygard. com/blog. 